import{initializeApp as w}from"https://www.gstatic.com/firebasejs/12.4.0/firebase-app.js";import{getAnalytics as P}from"https://www.gstatic.com/firebasejs/12.4.0/firebase-analytics.js";import{getFirestore as I,addDoc as k,collection as g,getDocs as v,doc as B,getDoc as F}from"https://www.gstatic.com/firebasejs/12.4.0/firebase-firestore.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))t(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const s of c.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&t(s)}).observe(document,{childList:!0,subtree:!0});function o(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerPolicy&&(c.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?c.credentials="include":r.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function t(r){if(r.ep)return;r.ep=!0;const c=o(r);fetch(r.href,c)}})();const x={apiKey:"AIzaSyCeFOpaUwaFECdxZsiGXVHUyo7ycfBuCsg",authDomain:"portfolio-9da15.firebaseapp.com",projectId:"portfolio-9da15",storageBucket:"portfolio-9da15.firebasestorage.app",messagingSenderId:"818550472669",appId:"1:818550472669:web:9aed576a6b0716860b8034",measurementId:"G-9RCQPMJQG9"},C=w(x);P(C);const m=I(C),p=document.getElementById("contactBtn"),f=document.getElementById("clientName"),h=document.getElementById("clientEmail"),y=document.getElementById("messageTextarea"),N=document.getElementById("contactForm");p&&p.addEventListener("click",async()=>{if(!f.value||!h.value||!y.value)alert("Please fill all the fields before submitting.");else try{const e=await k(g(m,"Inquires"),{Name:f.value,Email:h.value,Message:y.value});console.log("Enquire add it with ID ",e.id),alert("Thank you for your message! I'll get back to you within 24 hours."),N.reset()}catch(e){console.error("Error saving the enquire ",e),alert("Sorry, there was an issue sending your message. Please try again or contact me directly at jguardoruiz@gmail.com")}});document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("messageTextarea");if(e){let n=function(){e.style.height="auto",e.style.height=Math.max(50,e.scrollHeight)+"px"};e.addEventListener("input",n),e.addEventListener("focus",n),n()}});const E=document.getElementById("gitHubSeb"),b=document.getElementById("linkedInSeb");E&&E.addEventListener("click",()=>{window.open("https://github.com/Jguardo03","_blank")});b&&b.addEventListener("click",()=>{window.open("https://www.linkedin.com/in/juan-sebastian-guardo-ruiz/","_blank")});const L=document.getElementById("gitHubSebF"),j=document.getElementById("linkedInSebF");L&&L.addEventListener("click",()=>{window.open("https://github.com/Jguardo03","_blank")});j&&j.addEventListener("click",()=>{window.open("https://www.linkedin.com/in/juan-sebastian-guardo-ruiz/","_blank")});async function D(){try{console.log("Fetching projects from Firebase...");const e=await v(g(m,"projects")),n=[];return e.forEach(o=>{n.push({id:o.id,...o.data()})}),console.log("✅ Projects fetched:",n),n}catch(e){return console.error("❌ Error fetching projects:",e),[]}}async function R(){try{console.log("Fetching featured projects from Firebase...");const e=await v(g(m,"projects")),n=[];return e.forEach(o=>{n.push({id:o.id,...o.data()})}),n.slice(0,3)}catch(e){return console.error("❌ Error fetching featured projects:",e),[]}}async function H(e){try{console.log(`Fetching project "${e}" from Firebase...`);const n=B(m,"projects",e),o=await F(n);if(o.empty)return console.log(`❌ Project "${e}" not found.`),null;{const t={id:o.id,...o.data()};return console.log(`✅ Project "${e}" fetched:`,t),t}}catch(n){return console.error(`❌ Error fetching project "${e}":`,n),null}}async function M(){const e=new URLSearchParams(window.location.search),n=e.get("id");console.log("Project ID from URL parameters:",n);const o=e.get("name");return console.log("Project Name from URL parameters:",o),!n||n.trim()===""||n.length>50?(console.error("❌ Invalid project ID in URL parameters."),null):!o||o.trim()===""?(console.error("❌ Invalid project name in URL parameters."),null):{id:n,name:o}}async function U(){const e=await M();if(e===null){console.error("❌ Invalid URL parameters.");return}const{id:n,name:o}=e;console.log("✅ Project data from URL parameters:",{id:n,name:o});const t=await H(n);if(t===null){console.error("❌ Project not found in database.");return}document.getElementById("type-project").textContent=t.Category||"Unknown Type",document.getElementById("projectName").textContent=t.ProjectName||"Untitled Project",document.getElementById("projectDescription").textContent=t.ProjectOverview||"No description available",document.getElementById("githubLink").href=t.GitHubURL||"#";const r=[t.ProjectImage,t.ProjectImage1,t.ProjectImage2,t.ProjectImage3,t.ProjectImage4].filter(a=>a),c=$("#sync1"),s=$("#sync2");r.forEach(a=>{const i=`<div class="item"> <img src="${a}" alt="${t.ProjectName||"Project Image"}"> </div>`;c.trigger("add.owl.carousel",[$(i)]),s.trigger("add.owl.carousel",[$(i)])}),c.trigger("refresh.owl.carousel"),s.trigger("refresh.owl.carousel"),document.getElementById("projectOverview").textContent=t.ProjectDescription||"No overview available",[t.KeyFeature1,t.KeyFeature2,t.KeyFeature3,t.KeyFeature4,t.KeyFeature5,t.KeyFeature6].filter(a=>a).forEach(a=>{const i=document.createElement("li");i.innerHTML=`<i class="far fa-check-circle"></i> <span>${a}</span>`,document.getElementById("keyFeaturesList").appendChild(i)}),document.getElementById("projectDemo").src=t.ProjectDemo||"",[t.Language1,t.Language2,t.Language3,t.Language4].filter(a=>a).forEach(a=>{const i=document.createElement("span");i.className="tech-badge",i.textContent=a,document.getElementById("technologiesList").appendChild(i)}),document.getElementById("projectCategory").textContent=t.Category||"Unknown Category",document.getElementById("projectRepository").href=t.GitHubURL||"#"}function T(e){const n=document.createElement("div");n.className="card card-projects",n.id=`project-${e.id}`;const o=document.createElement("div");o.style.width="100%",o.style.height="220px",o.style.overflow="hidden",o.style.border="none",o.style.borderRadius="8px 8px 0 0",o.style.display="block";const t=document.createElement("img");t.src=e.ProjectImage||"placeholder-image.jpg",t.alt=e.ProjectName||"Project",t.style.width="100%",t.style.height="100%",t.style.objectFit="cover",t.style.display="block",o.appendChild(t);const r=document.createElement("div");r.style.display="flex",r.style.gap="0.25rem",[e.Language1,e.Language2,e.Language3].filter(a=>a).forEach(a=>{const i=document.createElement("p");i.className="xs-tool",i.textContent=a,r.appendChild(i)});const s=document.createElement("h3");s.textContent=e.ProjectName||"Untitled Project";const d=document.createElement("p");d.textContent=e.ProjectDescription||"No description available";const l=document.createElement("i");return l.className="fa-brands fa-github",l.style.cursor="pointer",l.style.fontSize="1.5rem",l.addEventListener("click",()=>{e.GitHubURL?window.open(e.GitHubURL,"_blank"):console.log("GitHub URL not available for this project")}),n.appendChild(o),n.appendChild(r),n.appendChild(s),n.appendChild(d),n.appendChild(l),n.addEventListener("click",()=>{window.location.href=`/project.html?id=${e.id}&name=${e.ProjectName.replaceAll(/\s+/g,"-").toLowerCase()}`}),n}function S(e){const n=document.createElement("div");n.className="card project-card-main",n.id=`featured-project-${e.id}`;const o=document.createElement("div");o.style.width="100%",o.style.height="280px",o.style.overflow="hidden",o.style.border="none",o.style.borderRadius="8px 8px 0 0",o.style.display="block";const t=document.createElement("img");t.src=e.ProjectImage||"Resources/photo-1557821552-17105176677c.avif",t.alt=e.ProjectName||"Project",t.style.width="100%",t.style.height="100%",t.style.objectFit="cover",t.style.display="block",o.appendChild(t);const r=document.createElement("div");r.className="project-description";const c=document.createElement("div");c.style.display="flex",c.style.gap="0.25rem",[e.Language1,e.Language2,e.Language3].filter(i=>i).forEach(i=>{const u=document.createElement("p");u.className="xs-tool",u.textContent=i,c.appendChild(u)});const d=document.createElement("h2");d.textContent=e.ProjectName||"Untitled Project";const l=document.createElement("p");l.textContent=e.ProjectDescription||"No description available";const a=document.createElement("i");return a.className="fa-brands fa-github",a.style.cursor="pointer",a.style.fontSize="1.5rem",a.addEventListener("click",()=>{e.GitHubURL?window.open(e.GitHubURL,"_blank"):console.log("GitHub URL not available for this project")}),r.appendChild(c),r.appendChild(d),r.appendChild(l),r.appendChild(a),n.appendChild(o),n.appendChild(r),n.addEventListener("click",()=>{window.location.href=`/project.html?id=${e.id}&name=${e.ProjectName.replaceAll(/\s+/g,"-").toLowerCase()}`}),n}async function O(){const e=document.getElementById("projectsContainer");if(!e){console.error("Projects container not found!");return}e.innerHTML="";const n=document.createElement("div");n.innerHTML="<p>Loading projects...</p>",e.appendChild(n);try{const o=await D();if(e.innerHTML="",o.length===0){const t=document.createElement("div");t.innerHTML="<p>No projects found. Add some projects to your Firebase database!</p>",t.style.gridColumn="1 / -1",t.style.textAlign="center",t.style.padding="2rem",e.appendChild(t);return}o.forEach(t=>{const r=T(t);e.appendChild(r)}),console.log(`✅ Rendered ${o.length} project cards`)}catch(o){console.error("❌ Error rendering projects:",o),e.innerHTML="<p>Error loading projects. Please try again later.</p>"}}async function G(){const e=document.getElementById("featuredProjectsContainer");if(!e){console.error("Featured projects container not found!");return}e.innerHTML="<p>Loading featured projects...</p>";try{const n=await R();if(e.innerHTML="",n.length===0){const o=document.createElement("div");o.innerHTML="<p>No featured projects available at the moment.</p>",o.style.textAlign="center",o.style.padding="2rem",e.appendChild(o);return}n.forEach(o=>{const t=S(o);e.appendChild(t)}),console.log(`✅ Rendered ${n.length} featured project cards`)}catch(n){console.error("❌ Error rendering featured projects:",n),e.innerHTML="<p>Error loading featured projects. Please try again later.</p>"}}document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("mobileMenuToggle"),n=document.getElementById("mobileMenu");e&&n&&(e.addEventListener("click",function(){n.classList.toggle("active");const t=e.querySelector("i");n.classList.contains("active")?(t.classList.remove("fa-bars"),t.classList.add("fa-times")):(t.classList.remove("fa-times"),t.classList.add("fa-bars"))}),n.querySelectorAll("a").forEach(t=>{t.addEventListener("click",function(){n.classList.remove("active");const r=e.querySelector("i");r.classList.remove("fa-times"),r.classList.add("fa-bars")})}),document.addEventListener("click",function(t){if(!e.contains(t.target)&&!n.contains(t.target)){n.classList.remove("active");const r=e.querySelector("i");r.classList.remove("fa-times"),r.classList.add("fa-bars")}}))});document.addEventListener("DOMContentLoaded",function(){const e=window.location.pathname.split("/").pop()||"index.html";console.log("DOM loaded, initializing Firebase and page-specific functionality..."),e==="index.html"||e===""?G():e==="projects.html"?O():e==="project.html"&&U()});
