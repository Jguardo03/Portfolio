<!DOCTYPE html>
<html lang="en">
<head>
    <title>Sebastian Guardo Portfolio</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="responsive.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="Sebastian Guardo">
    <meta name="keywords" content="html,css,javascript">
    <script src="https://kit.fontawesome.com/cffa9d18cb.js" crossorigin="anonymous"></script>
</head>
<header class="page-header">
    <h3><a href="index.html">Sebastian Guardo</a></h3>
    <button class="mobile-menu-toggle" id="mobileMenuToggle">
        <i class="fas fa-bars"></i>
    </button>
    <nav class="navigation">
        <a href="index.html">Home</a>
        <a href="About.html">About</a>
        <a href="projects.html">Projects</a>
        <a HREF="contact.html">Contact</a>
    </nav>
    <div class="mobile-menu" id="mobileMenu">
        <a href="index.html">Home</a>
        <a href="About.html">About</a>
        <a href="projects.html">Projects</a>
        <a href="contact.html">Contact</a>
    </div>
</header>
<body>
    <section class="banner-projects">
        <h1>My Projects</h1>
        <p class="text-medium">A collection of my work that demostrates my skills and experience in software development</p>
    </section>
    <section id="projectsContainer" class="projects-grid">
        <!-- Projects will be dynamically loaded here -->
    </section>
    
    
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-analytics.js";
        import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-firestore.js"; 

        // Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries

        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
            apiKey: "AIzaSyCeFOpaUwaFECdxZsiGXVHUyo7ycfBuCsg",
            authDomain: "portfolio-9da15.firebaseapp.com",
            projectId: "portfolio-9da15",
            storageBucket: "portfolio-9da15.firebasestorage.app",
            messagingSenderId: "818550472669",
            appId: "1:818550472669:web:9aed576a6b0716860b8034",
            measurementId: "G-9RCQPMJQG9"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
        const db = getFirestore(app);

        // Function to fetch projects from Firebase
        async function fetchProjects() {
            try {
                console.log("Fetching projects from Firebase...");
                const querySnapshot = await getDocs(collection(db, "projects"));
                const projects = [];
                
                querySnapshot.forEach((doc) => {
                    projects.push({
                        id: doc.id,
                        ...doc.data()
                    });
                });
                
                console.log("✅ Projects fetched:", projects);
                return projects;
            } catch (error) {
                console.error("❌ Error fetching projects:", error);
                return [];
            }
        }

        // Function to create a project card element
        function createProjectCard(project) {
            const cardDiv = document.createElement('div');
            cardDiv.className = 'card card-projects';
            cardDiv.id = `project-${project.id}`;
            
            // Create image container div
            const imgContainer = document.createElement('div');
            imgContainer.style.width = '100%';
            imgContainer.style.height = '220px';
            imgContainer.style.overflow = 'hidden';
            imgContainer.style.border = 'none';
            imgContainer.style.borderRadius = '8px 8px 0 0';
            imgContainer.style.display = 'block';
            
            // Create image element
            const img = document.createElement('img');
            img.src = project.ProjectImage || 'placeholder-image.jpg';
            img.alt = project.ProjectName || 'Project';
            img.style.width = '100%';
            img.style.height = '100%';
            img.style.objectFit = 'cover';
            img.style.display = 'block';
            
            // Add image to container
            imgContainer.appendChild(img);
            
            // Create technologies container
            const techContainer = document.createElement('div');
            techContainer.style.display = 'flex';
            techContainer.style.gap = '0.25rem';
            
            // Add technology tags
            const technologies = [
                project.Language1,
                project.Language2,
                project.Language3
            ].filter(tech => tech); // Remove empty values
            
            technologies.forEach(tech => {
                const techTag = document.createElement('p');
                techTag.className = 'xs-tool';
                techTag.textContent = tech;
                techContainer.appendChild(techTag);
            });
            
            // Create title
            const title = document.createElement('h3');
            title.textContent = project.ProjectName || 'Untitled Project';
            
            // Create description
            const description = document.createElement('p');
            description.textContent = project.ProjectDescription || 'No description available';
            
            // Create GitHub icon
            const githubIcon = document.createElement('i');
            githubIcon.className = 'fa-brands fa-github';
            githubIcon.style.cursor = 'pointer';
            githubIcon.style.fontSize = '1.5rem';
            
            // Add click event to GitHub icon (you can link to actual repo)
            githubIcon.addEventListener('click', () => {
                if (project.GitHubURL) {
                    window.open(project.GitHubURL, '_blank');
                } else {
                    console.log('GitHub URL not available for this project');
                }
            });
            
            // Append all elements to card
            cardDiv.appendChild(imgContainer);
            cardDiv.appendChild(techContainer);
            cardDiv.appendChild(title);
            cardDiv.appendChild(description);
            cardDiv.appendChild(githubIcon);
            
            return cardDiv;
        }

        // Function to render all projects
        async function renderProjects() {
            const projectsContainer = document.getElementById('projectsContainer');
            
            if (!projectsContainer) {
                console.error("Projects container not found!");
                return;
            }
            
            // Clear existing content
            projectsContainer.innerHTML = '';
            
            // Show loading state
            const loadingDiv = document.createElement('div');
            loadingDiv.innerHTML = '<p>Loading projects...</p>';
            projectsContainer.appendChild(loadingDiv);
            
            try {
                // Fetch projects from Firebase
                const projects = await fetchProjects();
                
                // Clear loading state
                projectsContainer.innerHTML = '';
                
                if (projects.length === 0) {
                    // Show message if no projects found
                    const noProjectsDiv = document.createElement('div');
                    noProjectsDiv.innerHTML = '<p>No projects found. Add some projects to your Firebase database!</p>';
                    noProjectsDiv.style.gridColumn = '1 / -1';
                    noProjectsDiv.style.textAlign = 'center';
                    noProjectsDiv.style.padding = '2rem';
                    projectsContainer.appendChild(noProjectsDiv);
                    return;
                }
                
                // Create and append project cards
                projects.forEach(project => {
                    const projectCard = createProjectCard(project);
                    projectsContainer.appendChild(projectCard);
                });
                
                console.log(`✅ Rendered ${projects.length} project cards`);
                
            } catch (error) {
                console.error("❌ Error rendering projects:", error);
                projectsContainer.innerHTML = '<p>Error loading projects. Please try again later.</p>';
            }
        }

        // Wait for DOM to be fully loaded
        document.addEventListener('DOMContentLoaded', () => {
            console.log("DOM loaded, initializing Firebase and rendering projects...");
            renderProjects();
        });

    </script>
    
    <!-- Mobile Menu JavaScript -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const mobileMenuToggle = document.getElementById('mobileMenuToggle');
            const mobileMenu = document.getElementById('mobileMenu');
            
            if (mobileMenuToggle && mobileMenu) {
                mobileMenuToggle.addEventListener('click', function() {
                    mobileMenu.classList.toggle('active');
                    
                    // Toggle hamburger icon
                    const icon = mobileMenuToggle.querySelector('i');
                    if (mobileMenu.classList.contains('active')) {
                        icon.classList.remove('fa-bars');
                        icon.classList.add('fa-times');
                    } else {
                        icon.classList.remove('fa-times');
                        icon.classList.add('fa-bars');
                    }
                });
                
                // Close mobile menu when clicking on a link
                const mobileMenuLinks = mobileMenu.querySelectorAll('a');
                mobileMenuLinks.forEach(link => {
                    link.addEventListener('click', function() {
                        mobileMenu.classList.remove('active');
                        const icon = mobileMenuToggle.querySelector('i');
                        icon.classList.remove('fa-times');
                        icon.classList.add('fa-bars');
                    });
                });
                
                // Close mobile menu when clicking outside
                document.addEventListener('click', function(event) {
                    if (!mobileMenuToggle.contains(event.target) && !mobileMenu.contains(event.target)) {
                        mobileMenu.classList.remove('active');
                        const icon = mobileMenuToggle.querySelector('i');
                        icon.classList.remove('fa-times');
                        icon.classList.add('fa-bars');
                    }
                });
            }
        });
    </script>
</body>
<footer>
    <div>
        <h3 style="color: #0070f3; ">Juan Sebastian Guardo Ruiz</h3>
        <p>Building digital experiences with code and creativity</p>
    </div>
    <div>
        <i class="fa-brands fa-github"></i>
        <i class="fa-brands fa-linkedin-in"></i>
    </div>
    
</footer>